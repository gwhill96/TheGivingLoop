<%# This is the home page %>
<%# List of donation choices & checkout basket %>
<%# http://localhost:3000/charity_profiles/1/donation_types %>

<h1>Home Page/Index Page for Donations</h1>

<div class="card_container">
<div class="card">
<% @donationtypes.each do |donationtype| %>
<li><%= donationtype.name %> - Â£ <%= donationtype.price %></li>
<%= simple_form_for [ @basket, @basket_item ] do |f| %>
  <%= f.hidden_field :donation_type_id, value: donationtype.id %>
  <%= f.submit "Add To Basket" %>
  <% end %>
<% end %>
</div>



<%#
  <%= form_with url:  basket_basket_items_path[@basket] do %>
    <%# <%= hidden_field_tag 'donation_type_id', donationtype.id %>
    <%# <%= hidden_field_tag 'basket_id', @basket.id %>
    <%# <%= submit_tag 'Add To Basket', class: 'btn btn-primary' %>
    <%# <%= raise %>
  <%# <% end %>
<%# photo for card %>


<br>

<div class="card">
  <% if current_user.nil? %>
    <h3>My Basket</h3>
    <%= link_to "View Final Basket", basket_path(@basket) %>
     <% if @basket.basket_items.empty? %>
     <h3>empty basket</h3>
     <% else %>
     <% @basket.basket_items.each do |item| %>
        <li><%= item.donation_type.name %> <%= item.donation_type.price %></li>
        <% end %>
      <% end %>

    <%# <%= link_to "Check Out As Guest",  %>
        <%= simple_form_for :guest_basket, url: basket_path(@basket), method: :patch do |f| %>
          <%= f.input :email %>
          <%= f.input :first_name %>
          <%= f.input :last_name %>
          <%= f.input :phone_number %>
          <%= f.submit 'Checkout' %>
        <% end %>
  <% elsif !current_user.charity %>
    <h3>My Basket</h3>
        <% if @basket.basket_items.empty? %>
          <h3>empty basket</h3>
        <% else %>
          <% @basket.basket_items.each do |item| %>
            <li><%= item.donation_type.name %> <%= item.donation_type.price %></li>
          <% end %>
        <% end %>
  <% elsif current_user.charity %>
    <h1>Welcome to the charity page</h1>
  <% end %>
  </div>

  <%# <% @donationtypes.each do |donationtype| %>
  <%# <%= donationtype.name %>
  <%# <%= donationtype.price %>
<%# photo for card %>
  <%# <% end %>


<%# <% if false %>
<%# Commenting out below makes home page work %>
<%# <%= form_with url: basket_items_path do %>
  <%# <%= hidden_field_tag 'donation_type_id', @donation_type.id %>
  <%# <%= submit_tag 'Add To Basket', class: 'btn btn-primary' %>
<%# <% end %>
